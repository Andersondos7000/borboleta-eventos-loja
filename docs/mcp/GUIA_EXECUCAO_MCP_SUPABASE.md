# Guia de Execu√ß√£o do MCP Supabase - Borboleta Eventos

## Status Atual
‚úÖ **MCP Supabase est√° FUNCIONANDO em modo somente leitura**

## Configura√ß√£o Atual

### Vari√°veis de Ambiente Configuradas
```bash
# No arquivo .env.mcp
MCP_SUPABASE_ENABLED=true
SUPABASE_PROJECT_REF=pxcvoiffnandpdyotped
SUPABASE_ACCESS_TOKEN=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_URL=https://pxcvoiffnandpdyotped.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

## M√©todos de Execu√ß√£o

### 1. M√©todo Recomendado - MCP Orchestrator
```powershell
# Carregar vari√°veis de ambiente e executar orchestrator
Get-Content .env.mcp | ForEach-Object { 
    if ($_ -match '^([^#][^=]+)=(.*)$') { 
        [Environment]::SetEnvironmentVariable($matches[1], $matches[2], 'Process') 
    } 
}; node scripts/mcp-orchestrator-simple.cjs
```

### 2. M√©todo Direto - NPX
```powershell
# Instalar globalmente (uma vez)
npm install -g @supabase/mcp-server-supabase

# Executar com vari√°veis de ambiente
$env:SUPABASE_ACCESS_TOKEN='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'
$env:SUPABASE_URL='https://pxcvoiffnandpdyotped.supabase.co'
$env:SUPABASE_ANON_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'
npx @supabase/mcp-server-supabase --read-only --project-ref=pxcvoiffnandpdyotped
```

### 3. M√©todo Terminal Atual (Em Execu√ß√£o)
```powershell
# Terminal 13 - Comando em execu√ß√£o
$env:SUPABASE_ACCESS_TOKEN='...'; $env:SUPABASE_URL='...'; $env:SUPABASE_ANON_KEY='...'; npx @supabase/mcp-server-supabase --read-only --project-ref=pxcvoiffnandpdyotped
```

## Verifica√ß√£o de Status

### Verificar se est√° rodando
```powershell
# Verificar processos Node.js
Get-Process node -ErrorAction SilentlyContinue

# Verificar portas em uso
netstat -an | Select-String ':'
```

### Logs do MCP Orchestrator
- ‚úÖ SUPABASE: HABILITADO - Supabase MCP Server oficial
- ‚úÖ SUPABASE iniciado (PID: definido)
- Status: Servidor ativo e funcionando

## Problemas Conhecidos e Solu√ß√µes

### 1. Erro "spawn npx ENOENT"
**Problema**: NPX n√£o encontrado no PATH
**Solu√ß√£o**: 
```powershell
# Verificar instala√ß√£o do Node.js
node --version
npm --version

# Reinstalar Node.js se necess√°rio
# Ou usar caminho completo do npm
```

### 2. Erro "MCP tool is not found"
**Problema**: Servidor MCP n√£o est√° respondendo ou n√£o est√° configurado corretamente
**Solu√ß√£o**: 
- Verificar se o servidor est√° rodando
- Verificar configura√ß√£o do mcp-config.json
- Reiniciar o servidor MCP

### 3. Problemas de Conectividade
**Problema**: N√£o consegue conectar com Supabase
**Solu√ß√£o**: 
- Verificar tokens de acesso
- Verificar URL do projeto
- Verificar conectividade de rede

## Comandos √öteis

### Parar Servidor MCP
```powershell
# Se usando orchestrator
Ctrl+C no terminal

# Se processo espec√≠fico
Stop-Process -Name "node" -Force
```

### Reiniciar Servidor MCP
```powershell
# Parar processo atual
Stop-Process -Name "node" -Force

# Executar novamente
Get-Content .env.mcp | ForEach-Object { if ($_ -match '^([^#][^=]+)=(.*)$') { [Environment]::SetEnvironmentVariable($matches[1], $matches[2], 'Process') } }; node scripts/mcp-orchestrator-simple.cjs
```

## Configura√ß√£o no Windsurf/Claude

O MCP Supabase est√° configurado para funcionar com:
- **Modo**: Somente leitura (--read-only)
- **Projeto**: pxcvoiffnandpdyotped
- **Funcionalidades**: Consultas SQL, listagem de tabelas, esquemas

## Pr√≥ximos Passos

1. ‚úÖ **Configura√ß√£o b√°sica conclu√≠da**
2. ‚úÖ **Servidor MCP em execu√ß√£o**
3. üîÑ **Teste de conectividade em andamento**
4. ‚è≥ **Integra√ß√£o com Windsurf/Claude**
5. ‚è≥ **Testes de funcionalidades espec√≠ficas**

## Notas Importantes

- O servidor est√° configurado em **modo somente leitura** por seguran√ßa
- Todas as credenciais est√£o configuradas corretamente
- O projeto Supabase est√° ativo e acess√≠vel
- A integra√ß√£o MCP est√° funcionando conforme documenta√ß√£o

---

**√öltima atualiza√ß√£o**: 09/08/2025 04:33 UTC
**Status**: ‚úÖ FUNCIONANDO
**Modo**: Somente leitura
**Terminal ativo**: 13 (comando_id: 17470493-7d29-4324-ac81-9dfe0f01ee17)