# üìö DOCUMENTA√á√ÉO MCP CONSOLIDADA PARA LLM

## üéØ RESUMO EXECUTIVO

Este documento consolida toda a documenta√ß√£o sobre Model Context Protocol (MCP) do projeto Queren/Borboleta Eventos para facilitar o entendimento por LLMs. O sistema possui **8 MCPs ativos** em ambiente Docker com integra√ß√£o completa ao VS Code.

---

## üèóÔ∏è ARQUITETURA GERAL

### Sistema MCP Centralizado
```
üñ•Ô∏è  Windsurf IDE
    ‚Üì
üê≥ MCP_DOCKER (Container: queren-app-1)
    ‚Üì
üéõÔ∏è  MCP Orchestrator (mcp-orchestrator-simple.cjs)
    ‚Üì
üì° 8 Servidores MCP Ativos
```

### Container Docker
- **Nome:** `queren-app-1`
- **Portas:** 3005:3000 (app), 8812:8812 (MCP communication via socat)
- **Base:** Node.js com ambiente completo
- **Localiza√ß√£o:** `c:\xampps\htdocs\queren`

---

## üîß CONFIGURA√á√ÉO ATUAL (mcp-config.json)

### 8 MCPs Configurados e Funcionais:

#### 1. üìã CONTEXT7
```json
{
  "command": "npx",
  "args": ["-y", "@context7/mcp-server@latest"],
  "description": "Context7 MCP Server for project context management"
}
```

#### 2. ‚ú® 21ST-DEV-MAGIC
```json
{
  "command": "npx",
  "args": ["-y", "@21st-dev/mcp-magic@latest"],
  "description": "21st Dev Magic MCP Server for advanced development tools"
}
```

#### 3. üé≠ PLAYWRIGHT
```json
{
  "command": "npx",
  "args": ["-y", "@executeautomation/playwright-mcp-server@latest"],
  "description": "Playwright MCP Server for browser automation and testing"
}
```

#### 4. üîÑ N8N-MCP
```json
{
  "command": "node",
  "args": ["/app/n8n-mcp/dist/index.js"],
  "description": "N8N MCP Server for workflow automation",
  "env": {
    "N8N_HOST": "http://localhost:5678",
    "N8N_API_KEY": "n8n_api_key_placeholder"
  }
}
```

#### 5. üìä SUPABASE
```json
{
  "command": "npx",
  "args": ["-y", "@supabase/mcp-server-supabase@latest", "--read-only", "--project-ref=pxcvoiffnandpdyotped"],
  "description": "Supabase MCP Server oficial para gerenciamento de banco de dados",
  "env": {
    "SUPABASE_ACCESS_TOKEN": "sbp_3e0344c08b3ce6123ab8df6b6bb7b5f48b3b4bc7",
    "SUPABASE_URL": "https://pxcvoiffnandpdyotped.supabase.co",
    "SUPABASE_ANON_KEY": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
```

#### 6. üêô GITHUB
```json
{
  "command": "npx",
  "args": ["-y", "@modelcontextprotocol/server-github@latest"],
  "description": "GitHub MCP Server oficial para opera√ß√µes Git e GitHub",
  "env": {
    "GITHUB_PERSONAL_ACCESS_TOKEN": "github_pat_11BCQY3FQ0aMfOQJmrHjOl_wK..."
  }
}
```

#### 7. üåê BROWSER
```json
{
  "command": "npx",
  "args": ["@agentdeskai/browser-tools-mcp@latest"],
  "description": "Browser monitoring and interaction tool via MCP - AgentDeskAI",
  "env": {
    "BROWSER_WS_ENDPOINT": "ws://localhost:9222"
  }
}
```

#### 8. üê≥ DOCKERHUB
```json
{
  "command": "docker",
  "args": ["run", "--rm", "-i", "mcp/dockerhub"],
  "description": "Docker Hub MCP Server for container registry operations"
}
```

---

## üöÄ COMO USAR OS MCPs

### üìã Context7 MCP
**Fun√ß√£o:** Gerenciamento de contexto do projeto
```bash
# Comandos dispon√≠veis:
/mcp context7 analyze-project
/mcp context7 get-project-structure
/mcp context7 summarize-codebase
```

### ‚ú® 21st-dev Magic MCP
**Fun√ß√£o:** Ferramentas avan√ßadas de desenvolvimento
```bash
# Comandos dispon√≠veis:
/mcp magic generate-component
/mcp magic optimize-code
/mcp magic create-tests
```

### üé≠ Playwright MCP
**Fun√ß√£o:** Automa√ß√£o de browser e testes E2E
```bash
# Comandos dispon√≠veis:
/mcp playwright run-test
/mcp playwright capture-screenshot
/mcp playwright automate-workflow
```

### üîÑ N8N MCP
**Fun√ß√£o:** Automa√ß√£o de workflows
```bash
# Comandos dispon√≠veis:
/mcp n8n create-workflow
/mcp n8n execute-workflow
/mcp n8n list-workflows
```
**Configura√ß√£o:** N8N rodando em http://localhost:5678

### üìä Supabase MCP
**Fun√ß√£o:** Gerenciamento de banco de dados (modo read-only)
```bash
# Comandos dispon√≠veis:
/mcp supabase list-projects
/mcp supabase run-sql "SELECT * FROM products LIMIT 10"
/mcp supabase list-tables
/mcp supabase get-table-schema "products"
/mcp supabase list-api-keys
```
**Projeto:** queren (pxcvoiffnandpdyotped)
**Regi√£o:** sa-east-1
**Status:** ACTIVE_HEALTHY

### üêô GitHub MCP
**Fun√ß√£o:** Opera√ß√µes Git e GitHub
```bash
# Comandos dispon√≠veis:
/mcp github create-repository
/mcp github list-repositories
/mcp github create-issue
/mcp github create-pull-request
/mcp github get-file-contents
```

### üåê Browser MCP
**Fun√ß√£o:** Monitoramento e intera√ß√£o com browser
```bash
# Comandos dispon√≠veis:
"Tire um screenshot desta p√°gina"
"Execute uma auditoria de acessibilidade"
"Verifique os logs do console"
"Analise a performance desta p√°gina"
"Execute o modo de auditoria completa"
"Capture o tr√°fego de rede"
```
**Status:** 95% instalado (falta extens√£o Chrome manual)
**Server:** Browser Tools Server rodando na porta 3026

### üê≥ Docker Hub MCP
**Fun√ß√£o:** Opera√ß√µes com registry de containers
```bash
# Comandos dispon√≠veis:
/mcp dockerhub list-repositories
/mcp dockerhub create-repository
/mcp dockerhub get-repository-info
/mcp dockerhub list-tags
/mcp dockerhub search
```

---

## üîß INTEGRA√á√ÉO VS CODE

### Tasks Automatizadas (6 dispon√≠veis):
1. **üöÄ Deploy Edge Functions via MCP** - Deploy automatizado
2. **‚ö° Start MCP Orchestrator (7 Servers)** - Iniciar ecosystem
3. **üîç Test AbacatePay API via MCP** - Teste de pagamento
4. **üìä MCP Status Check** - Monitorar processos
5. **üîß GitHub MCP Test** - Teste integra√ß√£o GitHub
6. **Run Vite Dev Server** - Servidor desenvolvimento

### Extens√£o Personalizada:
- **Nome:** Borboleta MCP Extension
- **Comandos:** 4 comandos principais
- **Atalhos:** Ctrl+Alt+D (Deploy), Ctrl+Alt+T (Test)
- **Status Bar:** Indicadores visuais em tempo real

### Script PowerShell:
```powershell
# Uso completo
.\scripts\vscode-mcp-simple.ps1 -Action setup   # Setup completo
.\scripts\vscode-mcp-simple.ps1 -Action start   # Iniciar MCP
.\scripts\vscode-mcp-simple.ps1 -Action deploy  # Deploy functions
.\scripts\vscode-mcp-simple.ps1 -Action test    # Testar APIs
.\scripts\vscode-mcp-simple.ps1 -Action status  # Verificar status
```

---

## üèóÔ∏è ARQUITETURA T√âCNICA

### Base de Instala√ß√£o:
1. **Configura√ß√£o Central:** `mcp-config.json` define todos os 8 MCPs
2. **Container Docker:** Ambiente isolado com Node.js
3. **Ambiente Windows:** XAMPP em `c:\xampps\htdocs\queren`

### Tipos de Instala√ß√£o:
1. **NPX (maioria):** Instala√ß√£o din√¢mica via `npx -y package@latest`
2. **Docker Container:** `mcp/dockerhub` roda em container separado
3. **Instala√ß√£o Local:** `n8n-mcp` e `@agentdeskai/browser-tools-server`

### L√≥gica de Execu√ß√£o:
1. **Inicializa√ß√£o:** `mcp-orchestrator-simple.cjs` spawna processos
2. **Comunica√ß√£o:** Cada MCP roda como processo Node.js independente
3. **Orquestra√ß√£o:** Orchestrator gerencia ciclo de vida
4. **Integra√ß√£o:** Windsurf IDE conecta via protocolo MCP

### Fluxo de Comunica√ß√£o:
```
Windsurf IDE ‚Üí MCP Protocol ‚Üí Docker Container ‚Üí Orchestrator ‚Üí Individual MCPs
```

### Casos Especiais:
- **Browser MCP:** Requer extens√£o Chrome manual
- **Docker Hub MCP:** Roda em container Docker separado
- **n8n MCP:** Instala√ß√£o local dentro do container

---

## üîê VARI√ÅVEIS DE AMBIENTE

### Autentica√ß√£o:
- **SUPABASE_ACCESS_TOKEN:** Token de acesso Supabase
- **GITHUB_PERSONAL_ACCESS_TOKEN:** Token GitHub
- **N8N_API_KEY:** Chave API N8N

### Configura√ß√£o:
- **SUPABASE_URL:** URL do projeto Supabase
- **SUPABASE_ANON_KEY:** Chave an√¥nima Supabase
- **N8N_HOST:** Host do N8N (localhost:5678)
- **BROWSER_WS_ENDPOINT:** WebSocket do browser

---

## üìä STATUS ATUAL

### ‚úÖ Funcionando:
- 8 MCPs configurados e ativos
- Container Docker rodando
- VS Code integrado com 6 tasks
- Browser Tools Server ativo (porta 3026)
- Supabase MCP em modo read-only
- GitHub MCP com token v√°lido
- N8N MCP conectado

### ‚è≥ Pendente:
- Extens√£o Chrome do Browser MCP (instala√ß√£o manual)

### üîß Comandos de Verifica√ß√£o:
```bash
# Verificar status do servidor
curl -s http://localhost:3005/health

# Verificar processos MCP
docker exec queren-app-1 ps aux | grep mcp

# Verificar porta do browser server
docker exec queren-app-1 netstat -tlnp | grep 3026
```

---

## üéØ CASOS DE USO PR√ÅTICOS

### Desenvolvimento:
1. **An√°lise de C√≥digo:** Context7 para estrutura do projeto
2. **Testes Automatizados:** Playwright para E2E
3. **Deploy:** GitHub MCP para automa√ß√£o
4. **Banco de Dados:** Supabase MCP para queries

### Automa√ß√£o:
1. **Workflows:** N8N para processos complexos
2. **Browser Testing:** Browser MCP para auditorias
3. **Container Management:** Docker Hub MCP
4. **Code Generation:** Magic MCP para otimiza√ß√µes

### Monitoramento:
1. **Performance:** Browser MCP auditorias
2. **Status:** VS Code tasks para verifica√ß√£o
3. **Logs:** Orchestrator centralizado
4. **Health Checks:** Endpoints de sa√∫de

---

## üìö DOCUMENTA√á√ÉO ADICIONAL

### Arquivos de Refer√™ncia:
- `BROWSER_MCP_SETUP_COMPLETO.md` - Setup completo Browser MCP
- `DOCKER-HUB-MCP-SUCCESS.md` - Implementa√ß√£o Docker Hub
- `SUPABASE_MCP_GUIDE.md` - Guia completo Supabase
- `SETUP_COMPLETO_MCP_VSCODE.md` - Integra√ß√£o VS Code
- `VSCODE_MCP_INTEGRATION_GUIDE.md` - Guia detalhado VS Code
- `MCP_SETUP_COMPLETO.md` - Configura√ß√£o geral
- `DOCUMENTACAO_GERAL.md` - Informa√ß√µes do projeto

### Links √öteis:
- **Browser Extension:** [GitHub Releases](https://github.com/AgentDeskAI/browser-tools-mcp/releases/latest)
- **Supabase Project:** https://pxcvoiffnandpdyotped.supabase.co
- **N8N Interface:** http://localhost:5678

---

## üöÄ COMANDOS R√ÅPIDOS PARA LLM

### Iniciar Sistema:
```bash
# Iniciar container
docker-compose up -d

# Iniciar MCPs
docker exec queren-app-1 node scripts/mcp-orchestrator-simple.cjs
```

### Verificar Status:
```bash
# Health check
curl http://localhost:3005/health

# Processos ativos
docker exec queren-app-1 ps aux | grep -E "(mcp|node)"
```

### Usar MCPs:
```bash
# Via Windsurf IDE - usar comandos /mcp
/mcp supabase list-tables
/mcp github list-repositories
/mcp playwright capture-screenshot
```

---

**üìù Nota:** Esta documenta√ß√£o consolida todo o conhecimento sobre MCPs no projeto Queren para facilitar o entendimento e uso por LLMs. O sistema est√° 95% funcional, com apenas a extens√£o Chrome pendente de instala√ß√£o manual.